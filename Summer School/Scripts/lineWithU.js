var __interpretation_started_timestamp__;
var k = 0;
var k1 = 0;
var v = 30;
var kturn = 0.8;
var retPeriod = 10;

function min0(a, b) {
  if (a < 0 || b < 0)
  	return 0;
  if (a < b)
  	return a;
  return b;
}
	  
var main = function()
{
  __interpretation_started_timestamp__ = Date.now();
  print("Hello");

  var leftEnc = brick.encoder("B4");
  var rightEnc = brick.encoder("B3");
  leftEnc.reset();
  rightEnc.reset();

  var leftM = brick.motor(M4);
	var rightM = brick.motor(M3);

	//var u = [0.0000000000, 0.0000000000, 0.0000000000, 0.0000000000, -2.8800000000, -1.4400000000, 0.0000000000, 0.0000000000, 0.0000000000, 0.0000000000, 0.0000000000, 6.2100000000, -2.8500000000, -16.9800000000, -4.1100000000, 0.6300000000, 17.7600000000, 19.7400000000, 13.5600000000, -4.5900000000, -5.0700000000, -6.8700000000, 5.4600000000, 8.7300000000, 18.1800000000, 16.0200000000, 11.4900000000, -2.4600000000, -13.7100000000, -11.4900000000, -14.7000000000, -6.4500000000, 4.8000000000, 4.9200000000, 19.6200000000, 16.6200000000, 12.4200000000, 9.4200000000, -2.4000000000, -5.1600000000, -1.4400000000, 3.5100000000, 7.0200000000, 8.6100000000, 6.9900000000, -1.2600000000, -12.9300000000, -19.2600000000, -17.0700000000, -14.3100000000, 2.3100000000, -4.1700000000, 19.0200000000, 7.7400000000, 8.3100000000, -16.0500000000, -7.3800000000, -10.7100000000, 6.9300000000, 18.9600000000, 24.7200000000, 17.8200000000, 15.6300000000, 0.6600000000, -0.8400000000, -3.8700000000, 2.3400000000, 2.2500000000, 3.4800000000, 0.7500000000, 0.2400000000, -2.0400000000, -2.5800000000, -2.3400000000, -0.5700000000, 1.3200000000, -0.7800000000, 2.6400000000, 1.3500000000, 7.2300000000, 9.7500000000, 11.5200000000, 15.4500000000, 16.7400000000, 19.7400000000, 19.5900000000, 19.1400000000, 16.2000000000, 16.2300000000, 8.6100000000, 7.8000000000, 5.7900000000, 5.3100000000, 9.9600000000, 8.8500000000, 9.6900000000, 9.6000000000, 9.4500000000, 7.7700000000, 7.7400000000, 7.4100000000, 9.9600000000, 9.9300000000, 11.5800000000, 16.1700000000, 16.1700000000, 0.0000000000, 0.0000000000, 0.0000000000, 0.0000000000, 0.0000000000, 0.0000000000, 0.0000000000, 0.0000000000, 0.0000000000, 5.2050000000, 10.4100000000, 3.8100000000, 8.9700000000, 10.1700000000, 11.4300000000, 19.7100000000, 25.8600000000, 21.1500000000, 18.9900000000, 15.2400000000, 4.8600000000, 0.8700000000, 1.5900000000, 0.0000000000, 2.0400000000, 5.9100000000, 9.9900000000, 24.1800000000, 30.2100000000, 21.7800000000, 9.0600000000, 13.4400000000, -2.7600000000, 5.9100000000, 2.4600000000, 11.1600000000, 10.7100000000, 25.5000000000, 20.5500000000, 18.0000000000, 17.1300000000, -6.6600000000, -4.5900000000, -3.4800000000, -1.7700000000, 0.1800000000, -1.4700000000, -3.0300000000, -4.3800000000, -3.9300000000, 2.9700000000, 4.5300000000, 7.9800000000, 8.7900000000, 6.0000000000, 4.8900000000, 5.8200000000, 3.2100000000, 3.1200000000, 1.7700000000, 3.3900000000, 2.2200000000, -0.8400000000, -1.6800000000, -7.6200000000, -5.5500000000, -10.5300000000, -7.4700000000, -6.3000000000, -8.5200000000, -2.9400000000, -5.6100000000, -7.5300000000, -8.9100000000, -8.3100000000, -7.1400000000, -6.2700000000, -1.2300000000, 1.0500000000, 2.1000000000, 16.1400000000, 10.5300000000, 11.0700000000, 2.5500000000, -1.9500000000, -6.5100000000, -12.0600000000, -11.9100000000, -9.8700000000, -9.3900000000, -8.8800000000, -6.2100000000, -9.3000000000, -7.6800000000];
	//var u = [0,0,0,0,-2.88,41.459999999999994,0,0,0,0,0,6.21,-2.8500000000000014,-16.98,-4.11,0.629999999999999,17.759999999999998,19.74,13.559999999999999,-4.590000000000001,-5.07,-6.870000000000001,5.459999999999999,8.729999999999999,18.18,16.02,11.489999999999998,-2.46,-13.71,-11.490000000000002,-14.7,-6.450000000000001,4.799999999999999,4.919999999999998,19.619999999999997,16.619999999999997,12.419999999999998,9.419999999999998,-2.4000000000000004,-5.160000000000002,-1.4400000000000013,3.509999999999998,7.019999999999998,8.61,6.989999999999998,-1.2600000000000016,-12.93,-19.26,-17.07,-14.310000000000002,2.3099999999999987,-4.170000000000002,19.019999999999996,7.7399999999999975,8.309999999999999,-16.05,-7.380000000000003,-10.710000000000003,6.929999999999997,18.959999999999997,24.719999999999995,17.819999999999997,15.629999999999994,0.6599999999999984,-0.8400000000000016,-3.8700000000000023,2.339999999999997,2.249999999999998,3.479999999999997,0.7499999999999974,0.23999999999999738,-2.0400000000000027,-2.580000000000003,-2.340000000000003,-0.570000000000003,1.319999999999997,-0.780000000000003,2.639999999999997,1.349999999999997,7.229999999999997,9.749999999999996,11.519999999999996,15.449999999999996,16.74,19.74,19.589999999999996,19.139999999999997,16.2,16.229999999999997,8.609999999999996,7.799999999999996,5.789999999999996,5.309999999999999,9.959999999999997,8.849999999999996,9.689999999999998,9.599999999999996,9.449999999999996,7.769999999999995,7.739999999999995,7.409999999999995,9.959999999999994,9.929999999999994,11.579999999999995,16.169999999999995,16.169999999999998,0,0,0,0,0,0,0,0,0,28.259999999999998,10.409999999999997,3.809999999999997,8.969999999999997,10.169999999999996,11.429999999999996,19.709999999999997,25.859999999999996,21.149999999999995,18.99,15.239999999999997,4.859999999999998,0.8699999999999957,1.5899999999999976,0,2.0399999999999965,5.909999999999997,9.989999999999997,24.179999999999996,30.209999999999994,21.779999999999994,9.059999999999993,13.439999999999994,-2.7600000000000033,5.909999999999997,2.459999999999997,11.159999999999997,10.709999999999997,25.499999999999996,20.549999999999997,18,17.13,-6.66,-4.590000000000001,-3.4800000000000004,-1.7700000000000005,0.17999999999999927,-1.4700000000000006,-3.0300000000000007,-4.380000000000001,-3.9300000000000006,2.9699999999999993,4.529999999999999,7.979999999999999,8.79,5.999999999999999,4.889999999999999,5.819999999999999,3.2099999999999995,3.119999999999999,1.7699999999999991,3.3899999999999997,2.2199999999999993,-0.8400000000000003,-1.6800000000000002,-7.620000000000001,-5.550000000000001,-10.530000000000001,-7.470000000000001,-6.300000000000001,-8.520000000000001,-2.9400000000000013,-5.610000000000001,-7.530000000000001,-8.910000000000002,-8.310000000000002,-7.1400000000000015,-6.270000000000001,-1.2300000000000013,1.049999999999998,2.0999999999999983,16.139999999999997,10.529999999999998,11.069999999999997,2.549999999999999,-1.950000000000002,-6.510000000000002,-12.060000000000002,-11.910000000000002,-9.870000000000001,-9.39,-8.880000000000003,-6.210000000000003,-9.300000000000002,-7.6800000000000015];
  u = [-30,-30,-30,-30,-30,1.92,30,30,30,30,30,30,30,41.16,13.799999999999997,-2.460000000000001,12.030000000000001,3.8999999999999995,-9.659999999999998,-4.889999999999999,-5.279999999999998,-8.459999999999999,-7.739999999999998,-7.979999999999997,-7.109999999999998,2.850000000000003,-3.6899999999999977,-0.29999999999999805,-2.699999999999998,-3.299999999999998,-3.299999999999998,-3.299999999999998,-2.339999999999998,-1.9199999999999977,-0.4799999999999982,-0.4799999999999983,0.6600000000000017,1.1100000000000017,2.4000000000000012,3.0000000000000018,3.0000000000000018,3.600000000000002,4.200000000000002,4.800000000000002,4.920000000000002,4.350000000000001,4.770000000000001,2.910000000000002,4.950000000000002,-1.049999999999998,2.700000000000002,0.15000000000000213,-1.049999999999998,-3.8399999999999976,-3.089999999999998,-6.119999999999997,-6.209999999999997,-7.559999999999998,-8.009999999999998,-9.059999999999999,-10.109999999999998,-10.199999999999998,-12.749999999999998,-13.199999999999998,-4.649999999999997,-11.099999999999996,-3.8699999999999966,-8.639999999999997,-6.689999999999997,-2.9399999999999977,-5.4899999999999975,-3.5999999999999983,0.36000000000000165,-1.5299999999999985,-0.23999999999999827,1.2600000000000016,2.040000000000001,2.670000000000001,5.520000000000002,5.370000000000002,5.940000000000001,8.22,8.22,8.13,10.470000000000002,8.280000000000001,9.450000000000001,5.79,6.6000000000000005,8.610000000000001,3.0600000000000005,-2.1299999999999986,2.5800000000000014,-4.349999999999998,-1.5299999999999985,-3.569999999999999,-6.9899999999999975,-6.989999999999998,-8.04,-9.389999999999997,-9.299999999999997,-9.54,-8.999999999999996,-9.359999999999996,-9.749999999999996,-9.719999999999997,-11.489999999999997,-8.219999999999997,-4.7099999999999955,-8.549999999999995,-1.7699999999999951,-5.489999999999995,-3.5699999999999954,1.3800000000000052,-1.0199999999999942,1.320000000000006,3.3300000000000054,4.680000000000005,5.460000000000005,5.430000000000005,6.720000000000006,6.720000000000006,4.350000000000007,5.430000000000005,5.1600000000000055,1.8600000000000056,2.9100000000000055,2.010000000000005,-3.359999999999995,-1.6499999999999944,-5.939999999999995,-5.369999999999994,-6.989999999999995,-7.739999999999995,-8.639999999999995,-8.879999999999995,-8.699999999999996,-7.559999999999995,-6.149999999999995,-7.469999999999994,-5.249999999999995,-7.829999999999995,-4.649999999999993,-6.7199999999999935,-2.8499999999999948,-3.5399999999999943,-0.23999999999999444,0.36000000000000565,4.4100000000000055,4.860000000000006,7.920000000000005,8.670000000000005,9.270000000000005,9.810000000000004,8.490000000000004,9.420000000000005,9.600000000000005,12.030000000000005,6.240000000000005,7.110000000000003,-2.6999999999999957,-0.689999999999996,-6.869999999999995,-5.729999999999995,-7.889999999999995,-8.099999999999994,-7.889999999999994,-10.679999999999994,-8.909999999999995,-10.949999999999996,-10.739999999999995,-10.979999999999997,-7.709999999999997,-9.059999999999995,-6.989999999999997,-2.6699999999999964,-3.0599999999999965,-2.069999999999997,-0.29999999999999716,-1.2299999999999969,0.6000000000000026,3.3300000000000027,4.830000000000004,6.270000000000003,9.060000000000002,10.440000000000003,12.510000000000003,14.190000000000003,15.270000000000003,15.510000000000003,17.520000000000003,17.940000000000005,16.470000000000006,20.100000000000005,12.210000000000004,14.250000000000007,6.7800000000000065,13.110000000000007,7.080000000000005,10.050000000000004,5.580000000000005,6.150000000000007,5.8200000000000065,4.890000000000007,3.960000000000007,4.950000000000007,2.9400000000000075,3.0900000000000074,4.140000000000008,3.480000000000008,6.390000000000008,5.850000000000008,7.620000000000008,6.600000000000007,8.580000000000007,7.890000000000008,5.550000000000008,10.620000000000008,8.460000000000006,8.190000000000008,9.600000000000009,11.100000000000009,10.650000000000007,11.580000000000009,11.280000000000006,15.870000000000006,15.600000000000007,15.000000000000005,16.050000000000004,16.800000000000004,17.550000000000004,16.380000000000006,18.210000000000008,18.360000000000007,16.860000000000007,18.810000000000006,17.820000000000007,18.6,19.23,19.56,20.37,20.43,20.79,21.63,21.72,23.07,23.4,25.02,25.65,26.16,26.039999999999996,25.529999999999998,25.529999999999998,24.959999999999994,22.649999999999995,23.699999999999996,22.199999999999996,21.149999999999995,22.349999999999994,21.569999999999997,21.54,21.689999999999998,21.089999999999996,20.789999999999996,20.009999999999998,19.98,18.689999999999998,18.9,17.07,15.569999999999997,14.729999999999995,13.019999999999996,12.449999999999996,11.699999999999996,9.659999999999995,8.609999999999996,6.239999999999996,4.8299999999999965,3.989999999999995,2.9999999999999956,1.2299999999999958,0.6899999999999953,-0.9000000000000048,-1.7100000000000042,-2.790000000000004,-4.320000000000004,-4.590000000000004,-2.040000000000004,-5.640000000000004,-6.5400000000000045,-2.640000000000004,-4.320000000000004,-6.0000000000000036,-6.000000000000004,-3.3900000000000046,-3.3300000000000045,-3.0000000000000036,5.909999999999996,3.629999999999996,5.279999999999996,4.529999999999996,8.459999999999996,12.689999999999996,17.939999999999998,17.129999999999995,20.189999999999994,21.15,30,30,30,30,11.789999999999996,13.229999999999997,15.359999999999998,6.719999999999999,13.979999999999999,5.399999999999998,10.319999999999997,7.919999999999997,8.519999999999998,8.399999999999999,8.969999999999997,8.069999999999999,10.679999999999998,9.299999999999997,8.519999999999998,11.219999999999999,11.819999999999999,10.95,10.829999999999998,12.449999999999998,12.299999999999999,11.339999999999998,11.7];
  t = [42,57,55,50,66,50,72,61,58,59,66,57,62,46,48,37,42,45,37,42,53,45,45,40,50,43,41,42,51,40,48,53,45,44,50,40,38,50,46,52,50,39,47,41,39,40,45,46,39,47,37,44,51,48,40,43,52,39,45,44,45,39,57,48,50,38,52,40,41,44,43,47,46,39,55,39,45,44,54,44,48,43,40,58,43,46,44,54,39,41,44,54,42,65,40,47,54,56,50,38,53,47,48,56,51,46,50,44,48,43,50,43,51,43,41,40,61,37,37,45,44,52,40,39,39,41,52,45,50,50,47,46,44,45,53,39,41,43,41,48,42,44,45,38,44,45,55,49,53,54,44,54,41,39,47,53,54,40,43,56,46,38,50,42,41,41,49,39,53,41,42,45,48,37,47,43,46,49,41,38,39,51,44,47,40,50,46,46,43,60,41,48,40,41,68,48,45,44,44,44,41,59,43,55,40,65,38,43,55,43,54,45,56,55,46,68,48,50,41,42,40,41,39,48,50,49,43,46,49,44,39,55,42,40,38,38,50,54,45,47,55,42,41,44,54,45,44,52,40,59,46,54,40,37,48,47,43,43,39,54,51,46,49,50,55,46,45,44,47,43,55,63,44,42,46,51,49,57,48,46,45,44,45,43,39,43,38,45,38,37,50,43,39,45,42,40,42,49,41,49,36,41,49,53,50,47,37,92,77,84,77,58,41,47,46,45,41,40,46,45,56,42,48,40,44,43,64,44,50,39,38,47,48,46,41];

  var t0 = script.time();
  var time = script.time();

	print(u.length);

	var tArr = [];
	var lArr = [];
	var rArr = [];
	for (var i = 0; i < u.length;)
	{
		leftM.setPower(min0(100, v + u[i]));
	  rightM.setPower(min0(100, v - u[i]));
	
	  if (script.time() - time > t[i + 1]) {
	  	i++;
	    time = script.time();
	  }
	 tArr.push(script.time() - t0);
	 lArr.push(leftEnc.readRawData());
	 rArr.push(rightEnc.readRawData());
	}
	
  leftM.setPower(101);
  rightM.setPower(101);

  script.writeToFile("scripts/result_trace.txt", "size = " + tArr.length + '\n'); 
  script.writeToFile("scripts/result_trace.txt", "timeArr = [" + tArr + "]\n");
  script.writeToFile("scripts/result_trace.txt", "lArr = [" + lArr + "]\n");
  script.writeToFile("scripts/result_trace.txt", "rArr = [" + rArr + "]\n");

  print("end");
}
